<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="cc_activity_report_template">
        <t t-call="web.external_layout">
            <br/>
            <t t-set="activity" t-value="doc.get_childs_activities()"/>
            <div class="text-center"><h2><b>Child's Activities</b></h2></div>
            <br/>
            <table class="table-sm" style="width:100%;">
                <tbody>
                    <tr>
                        <td class="text-left" style="width:80%;">
                            <div>
                                <h4>
                                    <span t-field="doc.name"/>
                                </h4>
                            </div>
                        </td>
                        <td class="text-right" style="width:20%;">
                            <div class="text-center" t-field="doc.image_1920" t-options="{'widget':'image','style':'max-width:100px;max-height:100px;'}"/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="table table-sm table-borderless">
                <tbody>
                    <tr>
                        <td><b>Classroom</b></td>
                        <td><span t-field="doc.main_room_id"/></td>
                        <td><b>Additional Rooms</b></td>
                        <td><span t-esc="', '.join(map(lambda x: (x.name), doc.other_room_ids))"/></td>
                    </tr>
                    <tr>
                        <td><b>Today's Date</b></td>
                        <td><span t-esc="doc.get_today()"/></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <br/><br/>
            <div t-if="len(activity or [])==0" class="text-center"><span>No records found</span></div>

            <table t-if="len(activity or [])!=0" class="table table-sm">
                <thead>
                    <tr>
                        <th>Start Datetime</th>
                        <th>End Datetime</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Link</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="activity" t-as="act">
                        <tr>
                            <td><span t-field="act.start_datetime"/></td>
                            <td><span t-field="act.end_datetime"/></td>
                            <td><span t-field="act.name"/></td>
                            <td><span t-field="act.description"/></td>
                            <td><a t-if="act.schedule_meet" class="btn btn-primary" t-att-href="act.session_link">Link</a></td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </t>
    </template>

    <template id="bi_morpho_childcare_management.cc_activity_reports_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="bi_morpho_childcare_management.cc_activity_report_template"/>
            </t>
        </t>
    </template>


    <template id="cc_nutrition_report_template">
        <t t-call="web.external_layout">
            <br/>
            <div class="text-center"><h2><b>Nutrition Plan</b></h2></div>
            <br/><br/>
            <table class="table-sm" style="width:100%;">
                <tbody>
                    <tr>
                        <td class="text-left" style="width:80%;">
                            <div>
                                <h4>
                                    <span t-field="doc.name"/>
                                </h4>
                            </div>
                        </td>
                        <td class="text-right" style="width:20%;">
                            <div class="text-center" t-field="doc.image_1920" t-options="{'widget':'image','style':'max-width:100px;max-height:100px;'}"/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br/><br/>
            <h5><b>Nutrition Meals:</b></h5><br/>
            <t t-if="len(doc.nutrition_ids) == 0"><center><div><span>No records found</span></div></center></t>
            <ul>
                <t t-foreach="doc.nutrition_ids" t-as="line">
                    <li>
                        <h5><b><span t-esc="line.name"/></b></h5><br/>
                        <ul>
                            <li><b>Food Items:</b><br/>
                                <table class="table table-sm table-borderless">
                                    <thead>
                                        <th>
                                            <tr style="border-bottom: 1px solid #000000">
                                                <td class="text-left"><b>Food Item</b></td>
                                                <td class="text-left"><b>Nutrition Type</b></td>
                                                <td class="text-left"><b>Quantity</b></td>
                                                <td class="text-left"><b>Qty Measure</b></td>
                                            </tr>
                                        </th>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="line.food_line_ids" t-as="ln">
                                            <tr style="border-bottom: 1px solid #000000">
                                                <td class="text-left"><span t-field="ln.name"/></td>
                                                <td class="text-left">
                                                    <span t-field="ln.nutrition_type"/>
                                                </td>
                                                <td class="text-left"><span t-field="ln.quantity"/></td>
                                                <td class="text-left"><span t-field="ln.qty_measure"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </li>
                        </ul>
                    </li>
                </t>
            </ul>
        </t>
    </template>

    <template id="bi_morpho_childcare_management.cc_nutrition_reports_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="bi_morpho_childcare_management.cc_nutrition_report_template"/>
            </t>
        </t>
    </template>
            
</odoo>
